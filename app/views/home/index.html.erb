<% if current_user %>
  <h3 class="text-center">My Entries</h3>
  
  <div class="form-group">
    <%= form_tag(root_path, :method => "get",
      id: "search-form") do %>
      <%= text_field_tag :category, params[:category], 
        placeholder: "Category", class: "form-control" %>
      <%= text_field_tag :start_date, params[:start_date],
        placeholder: "Start date", class: "form-control" %>
      <%= text_field_tag :end_date, params[:end_date],
        placeholder: "End date", class: "form-control" %>        
      <%= button_tag(type: "submit", class: "btn btn-default",
        id: "category-filter-button") do %>
        <i class="fa fa-search" aria-hidden="true"></i>
      <% end %>
    <% end %>
  </div>

  <% if @entries.exists? %>
    <table class="table table-hover table-sm table-striped">
      <thead>
        <tr>
          <th>Amount</th>
          <th>Category</th>
          <th>Type</th>
          <th>Comment</th>
          <th>Date</th>
          <th>Controls</th>
        </tr>
      </thead>
      <tbody>
        <% @entries.each do |entry| %>
          <tr>
            <td><%= entry.amount_currency %> <%= entry.amount %></td>
            <td><%= entry.category.name %></td>
            <td><%= entry.category.group %></td>
            <td><%= entry.comment %></td>
            <td><%= entry.created_at %></td>
            <td>
              <%= link_to 'Edit', edit_entry_path(entry) %>
              <%= link_to 'Destroy', entry, method: :delete, data: { confirm: 'Are you sure you want to continue?' } %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>  
  <% else %>
    <% if params[:category] %>
      <h5 class="text-center">You have no <strong><%= params[:category] %></strong> entries in the given range!</h5>
    <% else %>
      <h5 class="text-center">You have no entries!</h5>
    <% end %>
  <% end %>
  <%= link_to (fa_icon "plus-circle", text: 'Create new entry'), new_entry_path %>   
  
  <hr>
  
  <h3 class="text-center">My Categories</h3>
  <% if @categories.exists? %>
    <div class="list-group categories-list">
      <% @categories.each do |category| %>
        <div class="list-group-item">
          <%= link_to(category.name + ' - ' + category.group, edit_category_path(category)) %>
          <%= link_to ' - Destroy', category, method: :delete, data: { confirm: 'This will also delete all the associated entries. Are you sure you want to continue?' } %>
        </div>
      <% end %>
    </div>
  <% else %>
    <h5 class="text-center">You have no categories!</h5>
  <% end %>
  <%= link_to (fa_icon "plus-circle", text: 'Create new category'), new_category_path %>
  
<% else %>
  <p class="text-center">Please, log in or sign up to access the inc/exp tracker.</p>
<% end %>
